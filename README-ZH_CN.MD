<<<<<<< Updated upstream
# æŠ½å¥–ç¨‹åº

å¹´ä¼šæŠ½å¥–ç¨‹åºï¼Œ3D çƒä½“æŠ½å¥–ï¼Œæ”¯æŒå¥–å“ä¿¡æ¯é…ç½®ï¼Œå‚ä¸æŠ½å¥–äººå‘˜ä¿¡æ¯`Excel`å¯¼å…¥ï¼ŒæŠ½å¥–ç»“æœ`Excel`å¯¼å‡º

å¦‚æœè¯¥ç¨‹åºå¯¹ä½ æœ‰å¸®åŠ©ğŸ˜ğŸ˜ğŸ˜ï¼Œå¸Œæœ›ç»™ä¸ªâ­**star**â­å–”ã€‚ğŸ˜˜ğŸ˜˜ğŸ˜˜ğŸ˜ğŸ¥°ğŸ‰ğŸˆğŸƒ

> ç«‹å³ä½“éªŒä¸€ä¸‹ï¼š [https://moshang-ax.github.io/lottery/](https://moshang-ax.github.io/lottery/)

## æŠ€æœ¯

æŠ€æœ¯ï¼šNode + Express + Three.js

åå°é€šè¿‡`Express`å®ç°

å‰ç«¯æŠ½å¥–ç•Œé¢é€šè¿‡`Three.js`å®ç° 3D æŠ½å¥–çƒï¼Œå¼•ç”¨äº†`Three.js`çš„å®˜æ–¹ 3D ç¤ºä¾‹

## åŠŸèƒ½æè¿°ï¼š

1. å¯å°†æŠ½å¥–ç»“æœè¿›è¡Œä¿å­˜å®æ—¶ä¸‹è½½åˆ° excel ä¸­ğŸ‰
2. å·²æŠ½å–äººå‘˜ä¸åœ¨å‚ä¸æŠ½å–ï¼ŒæŠ½ä¸­çš„äººå‘˜ä¸åœ¨ç°åœºå¯ä»¥é‡æ–°æŠ½å–ğŸ
3. åˆ·æ–°æˆ–è€…å…³æ‰æœåŠ¡å™¨ï¼Œä¼šä¿å­˜å½“å‰å·²æŠ½å–çš„æ•°æ®ï¼Œä¸ä¼šè¿›è¡Œæ•°æ®é‡ç½®ï¼Œåªæœ‰ç‚¹å‡»ç•Œé¢ä¸Šçš„é‡ç½®æŒ‰é’®ï¼Œæ‰èƒ½é‡ç½®æŠ½å¥–æ•°æ®ğŸ§§
4. æ¯æ¬¡æŠ½å–çš„å¥–å“æ•°ç›®å¯é…ç½®ğŸˆ
5. æŠ½å–å®Œæ‰€æœ‰å¥–å“åè¿˜å¯ä»¥ç»§ç»­æŠ½å–ç‰¹åˆ«å¥–(ä¾‹å¦‚ï¼šç°åœ¨æŠ½å–çº¢åŒ…ï¼Œè¿½åŠ çš„å¥–å“ç­‰)ï¼Œæ­¤æ—¶é»˜è®¤ä¸€æ¬¡æŠ½å–ä¸€ä¸ªğŸ§¨

## é¢„è§ˆ

![lottery.gif](https://raw.githubusercontent.com/moshang-xc/blog/master/share/lottery.gif)

![index.jpg](https://raw.githubusercontent.com/moshang-xc/blog/master/share/index.jpg)

![start.jpg](https://raw.githubusercontent.com/moshang-xc/blog/master/share/start.jpg)

![end.jpg](https://raw.githubusercontent.com/moshang-xc/blog/master/share/end.jpg)

## å®‰è£…

```
git clone https://github.com/moshang-xc/lottery.git

cd lottery

# æœåŠ¡ç«¯æ’ä»¶å®‰è£…
cd server
npm install

# å‰ç«¯æ’ä»¶å®‰è£…
cd ../product
npm install

# æ‰“åŒ…
npm run build

# è¿è¡Œ
npm run serve

# å¼€å‘è°ƒè¯•
npm run dev

```

## ç›®å½•ç»“æ„

```
Lottery
â”œâ”€â”€ product
â”‚   â”œâ”€â”€ src
â”‚   â”‚   â”œâ”€â”€ lottery
â”‚   â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ lib
â”‚   â”‚   â”œâ”€â”€ img
â”‚   â”‚   â”œâ”€â”€ css
â”‚   â”‚   â””â”€â”€ data
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ webpack.config.js
â”œâ”€â”€ server
â”‚   â”œâ”€â”€ config.js
â”‚   â”œâ”€â”€ server.js
â”‚   â””â”€â”€ package.js
```

> 1. product ä¸ºå‰ç«¯é¡µé¢ç›®å½•
> 2. package.josn web é¡¹ç›®é…ç½®æ–‡ä»¶
> 3. webpack.config.js æ‰“åŒ…é…ç½®æ–‡ä»¶
> 4. server ä¸ºæœåŠ¡å™¨ç›®å½•
> 5. config ä¸ºå¥–å“ä¿¡æ¯çš„é…ç½®æ–‡ä»¶

## é…ç½®ä¿¡æ¯

### æŠ½å¥–ç”¨æˆ·ä¿¡æ¯é…ç½®

æŠ½å¥–ç”¨æˆ·ä¿¡æ¯åœ¨**`server/data/user.xlsx`**æ–‡ä»¶ä¸­ï¼ŒæŒ‰æ–‡ä»¶æ ¼å¼è¿›è¡Œå¡«å……ï¼Œä¸èƒ½ä¿®æ”¹æ–‡ä»¶åå’Œåˆ—å¤´

### å¥–å“ä¿¡æ¯é…ç½®

å¥–å“çš„é…ç½®ä¿¡æ¯å¡«å†™åœ¨**server/config.js**æ–‡ä»¶ä¸­ï¼Œä¸èƒ½ä¿®æ”¹æ–‡ä»¶åã€‚

**å…¶ä¸­å¥–å“ prizes çš„é…ç½®æè¿°å¦‚ä¸‹ï¼š**

| å‚æ•°  | å€¼ç±»å‹ | æè¿°                                                         |
| ----- | ------ | ------------------------------------------------------------ |
| type  | Number | å¥–å“ç±»å‹ï¼Œå”¯ä¸€æ ‡è¯†ï¼Œ0 æ˜¯é»˜è®¤ç‰¹åˆ«å¥–çš„å ä½ç¬¦ï¼Œå…¶å®ƒå¥–å“ä¸å¯ä½¿ç”¨ |
| count | Number | å¥–å“æ•°é‡                                                     |
| text  | String | å¥–é¡¹åç§°                                                     |
| title | String | å¥–å“æè¿°                                                     |
| img   | String | å¥–å“çš„å›¾ç‰‡åœ°å€ï¼Œå›¾ç‰‡åœ¨**img**ç›®å½•ä¸‹                          |

```js
// å¥–å“ä¿¡æ¯ï¼Œç¬¬ä¸€é¡¹ä¸ºé¢„ç•™é¡¹ä¸å¯ä¿®æ”¹ï¼Œå…¶ä»–é¡¹å¯æ ¹æ®éœ€è¦ä¿®æ”¹
let prizes = [{
        type: 0,
        count: 1000,
        title: "",
        text: "ç‰¹åˆ«å¥–"
    },
    {
        type: 1,
        count: 2,
        text: "ç‰¹ç­‰å¥–",
        title: "ç¥ç§˜å¤§ç¤¼",
        img: "../img/secrit.jpg"
    },
    {
        type: 2,
        count: 5,
        text: "ä¸€ç­‰å¥–",
        title: "Mac Pro",
        img: "../img/mbp.jpg"
    }
    ...
];
```

### å¥–å“æ¯æ¬¡æŠ½å–ä¸ªæ•°é…ç½®

**EACH_COUNT**ç”¨äºé…ç½®æ¯æ¬¡çš„æŠ½å¥–ä¸ªæ•°ï¼Œä¸ prizes å¥–å“ä¸€ä¸€å¯¹åº”ï¼Œä¾‹å¦‚ä¸Šé¢çš„å¥–å“é…ç½®å¯¹åº”çš„æŠ½å¥–ä¸ªæ•°é…ç½®å¦‚ä¸‹ï¼š

```js
const EACH_COUNT = [1, 1, 5];
```

å¦‚ä¸Šé…ç½®ï¼Œè¡¨ç¤ºä¸€æ¬¡æŠ½å–çš„å¥–å“ä¸ªæ•°é¡ºåºä¸ºï¼šç‰¹åˆ«å¥–æ¯æ¬¡æŠ½ä¸€ä¸ªï¼Œç‰¹ç­‰å¥–æ¯æ¬¡æŠ½ä¸€ä¸ªï¼Œä¸€ç­‰å¥–æ¯æ¬¡æŠ½äº”ä¸ª

### ä¼ä¸šæ ‡è¯†é…ç½®

è¯¥æ ‡è¯†ç”¨äºæ˜¾ç¤ºåœ¨æŠ½å¥–å¡ç‰‡ä¸Šã€‚

```js
const COMPANY = "MoShang";
```


## Dockeréƒ¨ç½²æ–¹æ¡ˆ

### æ¦‚è¿°

è¯¥é¡¹ç›®ç°åœ¨æ”¯æŒä½¿ç”¨Dockerè¿›è¡Œéƒ¨ç½²ã€‚Dockeræ˜¯ä¸€ä¸ªè½»é‡çº§çš„å®¹å™¨åŒ–å¹³å°ï¼Œå¯ä»¥è®©æ‚¨å¿«é€Ÿåœ°éƒ¨ç½²ã€æµ‹è¯•å’Œè¿è¡Œåº”ç”¨ç¨‹åºã€‚æœ¬æ–‡æ¡£å°†å‘æ‚¨ä»‹ç»å¦‚ä½•ä½¿ç”¨Dockeréƒ¨ç½²è¯¥é¡¹ç›®ã€‚

### ç³»ç»Ÿè¦æ±‚

åœ¨æ‚¨å¼€å§‹ä½¿ç”¨Dockeréƒ¨ç½²è¯¥é¡¹ç›®ä¹‹å‰ï¼Œæ‚¨éœ€è¦ç¡®ä¿å·²ç»å®‰è£…äº†ä»¥ä¸‹è½¯ä»¶ï¼š

- Dockerï¼ˆè¯·å‚é˜…Dockerçš„å®˜æ–¹æ–‡æ¡£ä»¥è·å–å®‰è£…è¯´æ˜ï¼‰
- Docker Compose

### å®‰è£…

1. ä¸‹è½½å¹¶è§£å‹è¯¥é¡¹ç›®çš„æºä»£ç ã€‚

2. è¿›å…¥è§£å‹åçš„é¡¹ç›®ç›®å½•ã€‚

3. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥æ„å»ºDockeré•œåƒï¼š

   ```
   ./build.sh [TAG]
   ```

   è¿™å°†ä½¿ç”¨Dockerfileæ„å»ºä¸€ä¸ªåä¸º`lottery:[TAG]`çš„Dockeré•œåƒã€‚å¦‚æœæœªæŒ‡å®šæ ‡ç­¾ï¼Œåˆ™é»˜è®¤ä½¿ç”¨`latest`æ ‡ç­¾ã€‚

4. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥åœ¨æœ¬åœ°è¿è¡Œå®¹å™¨ï¼š

   ```
   ./dev.sh [TAG]
   ```

   è¿™å°†å¯åŠ¨å®¹å™¨å¹¶å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åœ¨Dockerå®¹å™¨ä¸­ã€‚æ‚¨å¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œæµ‹è¯•ï¼Œç¡®ä¿ä¸€åˆ‡æ­£å¸¸ã€‚è¯·æ³¨æ„ï¼Œå®¹å™¨å†…éƒ¨çš„åº”ç”¨ç¨‹åºå°†ä¼šç›‘å¬8888ç«¯å£å’Œ443ç«¯å£ã€‚

5. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å°†Dockeré•œåƒæ ‡è®°å¹¶æ¨é€åˆ°è¿œç¨‹Dockerä»“åº“ï¼š

   ```
   ./tagpush.sh [TAG]
   ```

   è¿™å°†ä¸ºDockeré•œåƒæ‰“ä¸Šæ ‡ç­¾å¹¶å°†å…¶æ¨é€åˆ°è¿œç¨‹Dockerä»“åº“ï¼Œå¦‚æœè¦ä½¿ç”¨dockerå®˜æ–¹çš„hubè¯·å…ˆåœ¨https://hub.docker.com/æ–°å»ºè‡ªå·±çš„repoï¼Œç„¶åå°†æ–‡ä»¶ä¸­çš„ç”¨æˆ·åæ”¹ä¸ºè‡ªå·±ã€‚è¯·æ³¨æ„ï¼Œ`[TAG]`åº”æ›¿æ¢ä¸ºæ‚¨è¦ä½¿ç”¨çš„æ ‡ç­¾åç§°ã€‚

6. ç¡®ä¿æœ‰ä¸€ä¸ªåä¸º`docker-compose.yml`çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

   ```
   version: '3.8'
   
   volumes:
     lottery_log:
   
   services:
     lottery:
       container_name: lottery
       expose:
         - 8888
       ports:
         - "28458:8888"
         - "443:443"
       volumes:
         - "lottery_log:/var/log"
       image: "panda1024/lottery:[TAG]" 
       restart: always
   ```

   è¯·æ³¨æ„ï¼Œ`[TAG]`åº”æ›¿æ¢ä¸ºæ‚¨æ¨é€åˆ°Dockerä»“åº“çš„é•œåƒåç§°ã€‚

7. åœ¨æœåŠ¡å™¨ä¸Šçš„é¡¹ç›®ç›®å½•ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥ä½¿ç”¨Docker Composeéƒ¨ç½²åº”ç”¨ç¨‹åºï¼š

```
	docker-compose up -d
```

â€‹		è¿™å°†å¯åŠ¨ä¸€ä¸ªDocker Composeå †æ ˆï¼Œå¹¶å°†è¯¥é¡¹ç›®éƒ¨ç½²åœ¨å…¶ä¸­ã€‚è¯·æ³¨æ„ï¼Œæ­¤å¤„å°†å®¹å™¨çš„8888ç«¯å£å’Œ443ç«¯å£æ˜ å°„		åˆ°äº†æœåŠ¡å™¨ä¸Šçš„8888ç«¯å£å’Œ443ç«¯å£ã€‚å¦‚æœæ‚¨å¸Œæœ›ä½¿ç”¨å…¶ä»–ç«¯å£ï¼Œè¯·ç›¸åº”åœ°æ›´æ”¹`docker-compose.yml`æ–‡ä»¶ã€‚



## License

MIT
=======
# æŠ½å¥–ç¨‹åº

å¹´ä¼šæŠ½å¥–ç¨‹åºï¼Œ3D çƒä½“æŠ½å¥–ï¼Œæ”¯æŒå¥–å“ä¿¡æ¯é…ç½®ï¼Œå‚ä¸æŠ½å¥–äººå‘˜ä¿¡æ¯`Excel`å¯¼å…¥ï¼ŒæŠ½å¥–ç»“æœ`Excel`å¯¼å‡º

å¦‚æœè¯¥ç¨‹åºå¯¹ä½ æœ‰å¸®åŠ©ğŸ˜ğŸ˜ğŸ˜ï¼Œå¸Œæœ›ç»™ä¸ªâ­**star**â­å–”ã€‚ğŸ˜˜ğŸ˜˜ğŸ˜˜ğŸ˜ğŸ¥°ğŸ‰ğŸˆğŸƒ

> ç«‹å³ä½“éªŒä¸€ä¸‹ï¼š [https://moshang-xc.github.io/lottery/](https://moshang-xc.github.io/lottery/)

## æŠ€æœ¯

æŠ€æœ¯ï¼šNode + Express + Three.js

åå°é€šè¿‡`Express`å®ç°

å‰ç«¯æŠ½å¥–ç•Œé¢é€šè¿‡`Three.js`å®ç° 3D æŠ½å¥–çƒï¼Œå¼•ç”¨äº†`Three.js`çš„å®˜æ–¹ 3D ç¤ºä¾‹

## åŠŸèƒ½æè¿°ï¼š

1. å¯å°†æŠ½å¥–ç»“æœè¿›è¡Œä¿å­˜å®æ—¶ä¸‹è½½åˆ° excel ä¸­ğŸ‰
2. å·²æŠ½å–äººå‘˜ä¸åœ¨å‚ä¸æŠ½å–ï¼ŒæŠ½ä¸­çš„äººå‘˜ä¸åœ¨ç°åœºå¯ä»¥é‡æ–°æŠ½å–ğŸ
3. åˆ·æ–°æˆ–è€…å…³æ‰æœåŠ¡å™¨ï¼Œä¼šä¿å­˜å½“å‰å·²æŠ½å–çš„æ•°æ®ï¼Œä¸ä¼šè¿›è¡Œæ•°æ®é‡ç½®ï¼Œåªæœ‰ç‚¹å‡»ç•Œé¢ä¸Šçš„é‡ç½®æŒ‰é’®ï¼Œæ‰èƒ½é‡ç½®æŠ½å¥–æ•°æ®ğŸ§§
4. æ¯æ¬¡æŠ½å–çš„å¥–å“æ•°ç›®å¯é…ç½®ğŸˆ
5. æŠ½å–å®Œæ‰€æœ‰å¥–å“åè¿˜å¯ä»¥ç»§ç»­æŠ½å–ç‰¹åˆ«å¥–(ä¾‹å¦‚ï¼šç°åœ¨æŠ½å–çº¢åŒ…ï¼Œè¿½åŠ çš„å¥–å“ç­‰)ï¼Œæ­¤æ—¶é»˜è®¤ä¸€æ¬¡æŠ½å–ä¸€ä¸ªğŸ§¨

## é¢„è§ˆ

![lottery.gif](https://raw.githubusercontent.com/moshang-xc/blog/master/share/lottery.gif)

![index.jpg](https://raw.githubusercontent.com/moshang-xc/blog/master/share/index.jpg)

![start.jpg](https://raw.githubusercontent.com/moshang-xc/blog/master/share/start.jpg)

![end.jpg](https://raw.githubusercontent.com/moshang-xc/blog/master/share/end.jpg)

## å®‰è£…

```
git clone https://github.com/moshang-xc/lottery.git

cd lottery

# æœåŠ¡ç«¯æ’ä»¶å®‰è£…
cd server
npm install

# å‰ç«¯æ’ä»¶å®‰è£…
cd ../product
npm install

# æ‰“åŒ…
npm run build

# è¿è¡Œ
npm run serve

# å¼€å‘è°ƒè¯•
npm run dev

```

## ç›®å½•ç»“æ„

```
Lottery
â”œâ”€â”€ product
â”‚   â”œâ”€â”€ src
â”‚   â”‚   â”œâ”€â”€ lottery
â”‚   â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ lib
â”‚   â”‚   â”œâ”€â”€ img
â”‚   â”‚   â”œâ”€â”€ css
â”‚   â”‚   â””â”€â”€ data
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ webpack.config.js
â”œâ”€â”€ server
â”‚   â”œâ”€â”€ config.js
â”‚   â”œâ”€â”€ server.js
â”‚   â””â”€â”€ package.js
```

> 1. product ä¸ºå‰ç«¯é¡µé¢ç›®å½•
> 2. package.josn web é¡¹ç›®é…ç½®æ–‡ä»¶
> 3. webpack.config.js æ‰“åŒ…é…ç½®æ–‡ä»¶
> 4. server ä¸ºæœåŠ¡å™¨ç›®å½•
> 5. config ä¸ºå¥–å“ä¿¡æ¯çš„é…ç½®æ–‡ä»¶

## é…ç½®ä¿¡æ¯

### æŠ½å¥–ç”¨æˆ·ä¿¡æ¯é…ç½®

æŠ½å¥–ç”¨æˆ·ä¿¡æ¯åœ¨**`server/data/user.xlsx`**æ–‡ä»¶ä¸­ï¼ŒæŒ‰æ–‡ä»¶æ ¼å¼è¿›è¡Œå¡«å……ï¼Œä¸èƒ½ä¿®æ”¹æ–‡ä»¶åå’Œåˆ—å¤´

### å¥–å“ä¿¡æ¯é…ç½®

å¥–å“çš„é…ç½®ä¿¡æ¯å¡«å†™åœ¨**server/config.js**æ–‡ä»¶ä¸­ï¼Œä¸èƒ½ä¿®æ”¹æ–‡ä»¶åã€‚

**å…¶ä¸­å¥–å“ prizes çš„é…ç½®æè¿°å¦‚ä¸‹ï¼š**

| å‚æ•°  | å€¼ç±»å‹ | æè¿°                                                         |
| ----- | ------ | ------------------------------------------------------------ |
| type  | Number | å¥–å“ç±»å‹ï¼Œå”¯ä¸€æ ‡è¯†ï¼Œ0 æ˜¯é»˜è®¤ç‰¹åˆ«å¥–çš„å ä½ç¬¦ï¼Œå…¶å®ƒå¥–å“ä¸å¯ä½¿ç”¨ |
| count | Number | å¥–å“æ•°é‡                                                     |
| text  | String | å¥–é¡¹åç§°                                                     |
| title | String | å¥–å“æè¿°                                                     |
| img   | String | å¥–å“çš„å›¾ç‰‡åœ°å€ï¼Œå›¾ç‰‡åœ¨**img**ç›®å½•ä¸‹                          |

```js
// å¥–å“ä¿¡æ¯ï¼Œç¬¬ä¸€é¡¹ä¸ºé¢„ç•™é¡¹ä¸å¯ä¿®æ”¹ï¼Œå…¶ä»–é¡¹å¯æ ¹æ®éœ€è¦ä¿®æ”¹
let prizes = [{
        type: 0,
        count: 1000,
        title: "",
        text: "ç‰¹åˆ«å¥–"
    },
    {
        type: 1,
        count: 2,
        text: "ç‰¹ç­‰å¥–",
        title: "ç¥ç§˜å¤§ç¤¼",
        img: "../img/secrit.jpg"
    },
    {
        type: 2,
        count: 5,
        text: "ä¸€ç­‰å¥–",
        title: "Mac Pro",
        img: "../img/mbp.jpg"
    }
    ...
];
```

### å¥–å“æ¯æ¬¡æŠ½å–ä¸ªæ•°é…ç½®

**EACH_COUNT**ç”¨äºé…ç½®æ¯æ¬¡çš„æŠ½å¥–ä¸ªæ•°ï¼Œä¸ prizes å¥–å“ä¸€ä¸€å¯¹åº”ï¼Œä¾‹å¦‚ä¸Šé¢çš„å¥–å“é…ç½®å¯¹åº”çš„æŠ½å¥–ä¸ªæ•°é…ç½®å¦‚ä¸‹ï¼š

```js
const EACH_COUNT = [1, 1, 5];
```

å¦‚ä¸Šé…ç½®ï¼Œè¡¨ç¤ºä¸€æ¬¡æŠ½å–çš„å¥–å“ä¸ªæ•°é¡ºåºä¸ºï¼šç‰¹åˆ«å¥–æ¯æ¬¡æŠ½ä¸€ä¸ªï¼Œç‰¹ç­‰å¥–æ¯æ¬¡æŠ½ä¸€ä¸ªï¼Œä¸€ç­‰å¥–æ¯æ¬¡æŠ½äº”ä¸ª

### ä¼ä¸šæ ‡è¯†é…ç½®

è¯¥æ ‡è¯†ç”¨äºæ˜¾ç¤ºåœ¨æŠ½å¥–å¡ç‰‡ä¸Šã€‚

```js
const COMPANY = "MoShang";
```


## Dockeréƒ¨ç½²æ–¹æ¡ˆ

### æ¦‚è¿°

è¯¥é¡¹ç›®ç°åœ¨æ”¯æŒä½¿ç”¨Dockerè¿›è¡Œéƒ¨ç½²ã€‚Dockeræ˜¯ä¸€ä¸ªè½»é‡çº§çš„å®¹å™¨åŒ–å¹³å°ï¼Œå¯ä»¥è®©æ‚¨å¿«é€Ÿåœ°éƒ¨ç½²ã€æµ‹è¯•å’Œè¿è¡Œåº”ç”¨ç¨‹åºã€‚æœ¬æ–‡æ¡£å°†å‘æ‚¨ä»‹ç»å¦‚ä½•ä½¿ç”¨Dockeréƒ¨ç½²è¯¥é¡¹ç›®ã€‚

### ç³»ç»Ÿè¦æ±‚

åœ¨æ‚¨å¼€å§‹ä½¿ç”¨Dockeréƒ¨ç½²è¯¥é¡¹ç›®ä¹‹å‰ï¼Œæ‚¨éœ€è¦ç¡®ä¿å·²ç»å®‰è£…äº†ä»¥ä¸‹è½¯ä»¶ï¼š

- Dockerï¼ˆè¯·å‚é˜…Dockerçš„å®˜æ–¹æ–‡æ¡£ä»¥è·å–å®‰è£…è¯´æ˜ï¼‰
- Docker Compose

### å®‰è£…

1. ä¸‹è½½å¹¶è§£å‹è¯¥é¡¹ç›®çš„æºä»£ç ã€‚

2. è¿›å…¥è§£å‹åçš„é¡¹ç›®ç›®å½•ã€‚

3. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥æ„å»ºDockeré•œåƒï¼š

   ```
   ./build.sh [TAG]
   ```

   è¿™å°†ä½¿ç”¨Dockerfileæ„å»ºä¸€ä¸ªåä¸º`lottery:[TAG]`çš„Dockeré•œåƒã€‚å¦‚æœæœªæŒ‡å®šæ ‡ç­¾ï¼Œåˆ™é»˜è®¤ä½¿ç”¨`latest`æ ‡ç­¾ã€‚

4. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥åœ¨æœ¬åœ°è¿è¡Œå®¹å™¨ï¼š

   ```
   ./dev.sh [TAG]
   ```

   è¿™å°†å¯åŠ¨å®¹å™¨å¹¶å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åœ¨Dockerå®¹å™¨ä¸­ã€‚æ‚¨å¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œæµ‹è¯•ï¼Œç¡®ä¿ä¸€åˆ‡æ­£å¸¸ã€‚è¯·æ³¨æ„ï¼Œå®¹å™¨å†…éƒ¨çš„åº”ç”¨ç¨‹åºå°†ä¼šç›‘å¬8888ç«¯å£å’Œ443ç«¯å£ã€‚

5. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å°†Dockeré•œåƒæ ‡è®°å¹¶æ¨é€åˆ°è¿œç¨‹Dockerä»“åº“ï¼š

   ```
   ./tagpush.sh [TAG]
   ```

   è¿™å°†ä¸ºDockeré•œåƒæ‰“ä¸Šæ ‡ç­¾å¹¶å°†å…¶æ¨é€åˆ°è¿œç¨‹Dockerä»“åº“ï¼Œå¦‚æœè¦ä½¿ç”¨dockerå®˜æ–¹çš„hubè¯·å…ˆåœ¨https://hub.docker.com/æ–°å»ºè‡ªå·±çš„repoï¼Œç„¶åå°†æ–‡ä»¶ä¸­çš„ç”¨æˆ·åæ”¹ä¸ºè‡ªå·±ã€‚è¯·æ³¨æ„ï¼Œ`[TAG]`åº”æ›¿æ¢ä¸ºæ‚¨è¦ä½¿ç”¨çš„æ ‡ç­¾åç§°ã€‚

6. ç¡®ä¿æœ‰ä¸€ä¸ªåä¸º`docker-compose.yml`çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

   ```
   version: '3.8'
   
   volumes:
     lottery_log:
   
   services:
     lottery:
       container_name: lottery
       expose:
         - 8888
       ports:
         - "28458:8888"
         - "443:443"
       volumes:
         - "lottery_log:/var/log"
       image: "panda1024/lottery:[TAG]" 
       restart: always
   ```

   è¯·æ³¨æ„ï¼Œ`[TAG]`åº”æ›¿æ¢ä¸ºæ‚¨æ¨é€åˆ°Dockerä»“åº“çš„é•œåƒåç§°ã€‚

7. åœ¨æœåŠ¡å™¨ä¸Šçš„é¡¹ç›®ç›®å½•ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥ä½¿ç”¨Docker Composeéƒ¨ç½²åº”ç”¨ç¨‹åºï¼š

```
	docker-compose up -d
```

â€‹		è¿™å°†å¯åŠ¨ä¸€ä¸ªDocker Composeå †æ ˆï¼Œå¹¶å°†è¯¥é¡¹ç›®éƒ¨ç½²åœ¨å…¶ä¸­ã€‚è¯·æ³¨æ„ï¼Œæ­¤å¤„å°†å®¹å™¨çš„8888ç«¯å£å’Œ443ç«¯å£æ˜ å°„		åˆ°äº†æœåŠ¡å™¨ä¸Šçš„8888ç«¯å£å’Œ443ç«¯å£ã€‚å¦‚æœæ‚¨å¸Œæœ›ä½¿ç”¨å…¶ä»–ç«¯å£ï¼Œè¯·ç›¸åº”åœ°æ›´æ”¹`docker-compose.yml`æ–‡ä»¶ã€‚



## License

MIT
>>>>>>> Stashed changes
